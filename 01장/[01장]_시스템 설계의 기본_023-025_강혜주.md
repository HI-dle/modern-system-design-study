# 1.2 시스템 설계의 다양한 유형

시스템 설계는 기본적으로 두 가지 유형으로 나뉜다.
- 하나는 상위 수준의 시스템 설계에 해당하는 아키텍처 설계
- 나머지 하나는 하위 수준의 시스템 설계에 해당하는 상세 설계이다.

---

## 1.2.1 상위 수준의 시스템 설계

> **상위 수준의 시스템 설계시 고려 사항**
>
> - 시스템 아키텍쳐
  >   - 시스템의 전반적인 구조
  >   - 컴포넌트나 각 구성요소 간 통신방식, 관계를 포함
> - 데이터 흐름
  >     - 데이터가 시스템을 통해 수집되어 저장, 처리하는 과정
> - 확장성
  >     - 작업량이 증가해도 성능 저하 없이 부하를 처리할 수 있는 능력
> - 장애 허용 시스템
>   - 오류가 발생해도 시스템이 제 기능을 수행할 수 있는 능력

---
### 시스템 아키텍쳐

상위 수준의 시스템을 만들 때 중요한 점은 전체 아키텍처를 정의하는 것이다.
나무를 심기보다 나무가 가득한 공원을 세울 위치를 선정하고, 구조를 만드는 작업을 먼저 해야한다.

#### 아키텍쳐 설계 패턴

- **모놀리식 (monolithic)**: 모든 시스템 구성 요소를 결합한 하나의 독립적인 애플리케이션
- **클라이언트-서버 (client-server)**: 클라이언트가 하나 이상의 서버에 서비스를 요청하는 분산 아키텍처
- **마이크로서비스 (microservices)**: 네트워크를 통해 통신하는 작고 독립적인 여러 서비스로 구성된 모듈형 아키텍처
- **이벤트 주도 (event-driven)**: 비동기 이벤트 또는 메시지로 각 구성 요소가 상호 작용하는 시스템

#### 아키텍처 설계 시 고려 사항

- **확장성**: 서비스 사용자 수 증가, 데이터 증가, 기능 추가 시 이를 지원할 수 있는지
- **유지 보수성**: 버그 수정, 디버깅, 성능 개선 작업이 얼마나 수월한지
- **신뢰성**: 시스템이 중단 없이 안정적으로 동작할 수 있는지
- **지연 시간**: 아키텍처가 시스템의 응답 시간과 성능에 미치는 영향

---

### 데이터 흐름

시스템을 설계할 때 데이터 흐름을 고려하지 않는 것은 고추장 없이 비빔밥을 만드는 것과 같다.
데이터 흐름을 잘 이해해야 효율적인 수집, 저장, 처리, 검색이 가능해진다.

#### 데이터 흐름 설계 시 고려 사항

- **데이터 수집**
    - 데이터가 어디에서 오는지, 시스템으로 어떻게 가져올지 정의
    - API 호출, 실시간 스트리밍, 배치 처리 등

- **데이터 저장**
    - 데이터 저장 방식 결정
    - 접근 빈도/ 검색 성능/일관성 요구 수준

- **데이터 처리**
    - 데이터 변환, 분석, 요약 과정
    - 필요한 컴퓨팅 자원/ 지연 및 병목 가능성

- **데이터 검색**
    - 사용자가 데이터를 어떻게 조회할지 정의
    - 응답 시간/ 캐싱 전략/ 부하 분산 전략

> 데이터 흐름은 시스템의 성능, 확장성, 사용성에 직접적인 영향을 미치므로 *수집, 저장, 처리, 검색*  방식을 어떻게 수행할 지 세부적으로 설계하는 것이 중요하다.<br><br>
> 올바른 도구, 방법을 선택해야한 시스템이 원활하게 작동하며, 필요시 쉽게 확장할 수 있다.

----
### 확장성

확장성은 시스템의 성능 저하 없이 증가하는 작업 부하를 처리할 수 있는 능력을 말한다.

#### 종류

- **수직 확장성 (Scale-Up)**
    - CPU, 메모리, 저장소 등 단일 컴포넌트에 자원을 추가

- **수평 확장성 (Scale-Out)**
    - 여러 컴포넌트나 인스턴스로 작업 부하를 분산
    - 클러스터에 서버를 추가하는 예

### 확장성 설계 시 고려 요소

- 로드 밸런싱
- 캐싱
- 데이터베이스 분할
- 스테이트리스 서비스 활용

> 식당 운영 가정
>
>처음에는 작은 식당이라 주방 하나, 테이블 몇 개로 충분하지만 손님이 늘어나면서 더 많은 음식을 빠르게 제공해야 하는 상황이 오게된다.
>
> - **수직 확장성**  
 >   -   기존 주방을 업그레이드  
 >   - 더 큰 오븐 도입  
 >   - 냉장고 추가  
 >   - 조리 공간 확장
>
>
>- **수평 확장성**  
 >   - 새로운 주방을 추가  
 >   -  작은 주방을 하나 더 설치  
 >   - 요리사 추가 고용  
 >   - 여러 주방이 동시에 음식 준비


---
### 장애 허용 시스템

장애 허용성은 시스템의 일부 요소에 장애가 발생해도  전체 시스템이 계속 정상적으로 동작할 수 있는 능력을 의미한다.
장애 허용성을 갖춘 시스템은 신뢰성이 높고, 다운타임이 적다.

####  장애 허용 시스템 설계시 고려 사항

- 복제
- 중복성
- 점진적 성능 저하
- 모니터링
- 자가 복구


